<!doctype html>
<html lang="zh-CN">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

  
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />

  
  
  

  <link rel="stylesheet" href="/css/mobi.css-3.1.1/dist/mobi.min.css">
<link rel="stylesheet" href="/css/caomei1.2.1/style.css">
<link rel="stylesheet" href="/css/theme.css">

  
    <meta name="keywords" content="Windows, Hyper-V, Samba" />
  

  
    <link rel="alternate" href="/atom.xml" title="流浪小猫的博客" type="application/atom+xml" />
  

  
    <link rel="shortcut icon" href="/favicon.ico">
  

  <title>在 Windows 中配置 Linux 工作环境（使用 Hyper-V） - 流浪小猫的博客</title>
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

  <body class="theme-body">
    <div class="flex-center theme-header-wrapper">
  <div class="container flex-left units-gap theme-header-container">
    <a href="/" class="unit-0 theme-header-icon theme-icon-link" title="首页">
      <i class="czs-home-l"></i>
    </a>
    <div class="flex-center text-center flex-middle unit theme-header-title theme-header-title-no-transition">
      流浪小猫的博客
    </div>
    <a class="unit-0 theme-header-icon theme-icon-link theme-header-sidebar-icon" href="javascript:void(0);" title="更多">
      <i class="czs-menu-l"></i>
    </a>
  </div>
</div>
<div class="theme-header-placeholder"></div>

    <div class="flex-center">
      <div class="container">
        <article>
  <h1 class="text-center">
    在 Windows 中配置 Linux 工作环境（使用 Hyper-V）
  </h1>
  <div class="text-center top-gap">
    <div class="text-small text-muted">
  <time datetime="2016-05-20T15:57:04+08:00">
    2016-05-20
  </time>
  <span class="theme-separator">·</span>
  <i class="czs-user-l"></i>
  <a class="text-muted theme-text-no-decoration" href="https://github.com/xcatliu">xcatliu</a>
  <span class="theme-separator">·</span>
  <i class="czs-bookmark-l"></i>
  <a class="text-muted theme-text-no-decoration" href="/categories/Programmer/">Programmer</a>
  <span class="theme-comment-count-container theme-hide theme-comment-count-container-transparent">
    <span class="theme-separator">·</span>
    <i class="czs-comment-l"></i>
    <a class="text-muted theme-text-no-decoration theme-comment-count" data-disqus-identifier="2016/05/20/setup_linux_workspace_in_windows_using_hyper-v/" href="/2016/05/20/setup_linux_workspace_in_windows_using_hyper-v/#disqus_thread"></a>
  </span>
</div>

  </div>
  <div class="top-gap-big">
    <blockquote>
<p><a href="http://blog.xcatliu.com/2016/04/21/setup-linux-workspace-in-windows/">上次使用 Vitural Box 安装了 Ubuntu</a>，结果一个月之后挂了，这次试试上次被推荐的 Hyper-V 吧。</p>
</blockquote>
<p>基于<a href="https://v2ex.com/t/274202" target="_blank" rel="external">上次 v2ex 上的建议</a>，这次选择的方案是：Hyper-V + Ubuntu + PuTTY + Samba。</p>
<a id="more"></a>
<h2 id="Hyper-V"><a href="#Hyper-V" class="headerlink" title="Hyper-V"></a>Hyper-V</h2><p>Hyper-V 是微软的一款虚拟化产品。Windows Server 2008 或者 Windows 7 以上就可以使用了。</p>
<p>如果你使用的是 Windows 7，按如下方式开启（中文请自行对应）：</p>
<ol>
<li>打开 Control Panel =&gt; Programs =&gt; Uninstall a program =&gt; Turn Windows features on or off</li>
<li>勾选 Hyper-V =&gt; OK</li>
<li>安装好之后，需要重启系统</li>
</ol>
<p>如果是 Windows 10，按如下方式开启：</p>
<ol>
<li>搜索 Turn Windows features on or off，打开对应的结果</li>
<li>勾选 Hyper-V =&gt; OK</li>
<li>安装好之后，需要重启系统</li>
</ol>
<p><img src="http://7xthy2.com1.z0.glb.clouddn.com/blog/2016-05-21-install-hyper-v.png" alt="Install Hyper-V"></p>
<h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h2><p>官网：<a href="http://www.ubuntu.com/server" target="_blank" rel="external">http://www.ubuntu.com/server</a></p>
<p>Linux 中，Ubuntu 使用最广泛，比较适合新手，遇到问题基本都能 Google 出来。既然是在虚拟机中安装 Linux，那么图形界面实在没有多少用途了。纯命令行也很适合学习。</p>
<p>安装 LTS 版本的 Ubuntu，可以获得五年的支持。Ubuntu 16.04 LTS 已出，所以我选择的是 <code>ubuntu-16.04-server-amd64</code>。</p>
<p>安装之前，需要在 Hyper-V 中配置一个 Vitural Switch，使 Ubuntu 可以共享 Windows 的网络。步骤如下：</p>
<ol>
<li>打开 Hyper-V Manager =&gt; Vitural Switch Manager</li>
<li>选择 New virtual network switch =&gt; External =&gt; Create Virtual Switch =&gt; 默认配置 =&gt; OK</li>
<li>安装 Ubuntu 的时候，选择刚刚新建的 Virutal Switch</li>
</ol>
<blockquote>
<p>Tip: 安装过程中，请勾选 SSH Service、Samba Service，可以省去自己安装的麻烦。</p>
</blockquote>
<p>安装完成后，登录系统，输入 <code>ifconfig</code> 查询 IP，记录下来。</p>
<h2 id="PuTTY"><a href="#PuTTY" class="headerlink" title="PuTTY"></a>PuTTY</h2><p>官网：<a href="http://www.putty.org/" target="_blank" rel="external">http://www.putty.org/</a></p>
<p>PuTTY 是 Windows 上用于 SSH 连接的工具，使用很方便，输入 IP 即可。</p>
<blockquote>
<p>Tip: 如果想要保存自定义的配置，登录之后，打开设置，配置好之后，点 Default Settings，然后点击 Save 即可。</p>
</blockquote>
<blockquote>
<p>Tip: 推荐使用 <a href="https://tmux.github.io/" target="_blank" rel="external">tmux</a> 保存当前会话。</p>
</blockquote>
<h2 id="Samba"><a href="#Samba" class="headerlink" title="Samba"></a>Samba</h2><p>官网：<a href="https://www.samba.org/" target="_blank" rel="external">https://www.samba.org/</a></p>
<p>Samba 是 Linux 上在局域网共享文件的服务。之前安装 Ubuntu 的时候，已经选择了安装 Samba Service，如果没有选择，则需要手动安装一下：</p>
<pre class=" language-shell"><code class="language-shell">sudo apt-get update
sudo apt-get install samba
</code></pre>
<p>下一步需要配置共享文件夹，这里有篇<a href="https://help.ubuntu.com/community/How%20to%20Create%20a%20Network%20Share%20Via%20Samba%20Via%20CLI%20(Command-line%20interface/Linux%20Terminal)%20-%20Uncomplicated,%20Simple%20and%20Brief%20Way!" target="_blank" rel="external">参考文章</a>，解释的非常详细。我这里做一个简单的介绍：</p>
<h3 id="1-为-Samba-配置一个用户"><a href="#1-为-Samba-配置一个用户" class="headerlink" title="1. 为 Samba 配置一个用户"></a>1. 为 Samba 配置一个用户</h3><pre class=" language-shell"><code class="language-shell">sudo smbpasswd -a <user_name>
</code></pre>
<blockquote>
<p>Tip: Samba 的用户和 Linux 系统的用户是独立的。这里建议可以设置为同样的用户名。</p>
</blockquote>
<blockquote>
<p>Tip: 这里设置的用户名密码用于在主系统（Windows）访问共享文件时的权限认证。</p>
</blockquote>
<h3 id="2-创建一个共享文件夹"><a href="#2-创建一个共享文件夹" class="headerlink" title="2. 创建一个共享文件夹"></a>2. 创建一个共享文件夹</h3><pre class=" language-shell"><code class="language-shell">mkdir /home/<user_name>/<folder_name>
</code></pre>
<h3 id="3-将-Samba-配置文件备份"><a href="#3-将-Samba-配置文件备份" class="headerlink" title="3. 将 Samba 配置文件备份"></a>3. 将 Samba 配置文件备份</h3><pre class=" language-shell"><code class="language-shell">sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.bak
</code></pre>
<h3 id="4-修改-Samba-配置"><a href="#4-修改-Samba-配置" class="headerlink" title="4. 修改 Samba 配置"></a>4. 修改 Samba 配置</h3><pre class=" language-shell"><code class="language-shell">sudo vi /etc/samba/smb.conf
</code></pre>
<p>在末尾添加以下内容：</p>
<pre class=" language-shell"><code class="language-shell">[<folder_name>]
path = /home/<user_name>/<folder_name>
valid users = <user_name>
read only = no
</code></pre>
<blockquote>
<p>Tip: 注意等号左右必须有一个空格</p>
</blockquote>
<h3 id="5-重启-Samba-服务"><a href="#5-重启-Samba-服务" class="headerlink" title="5. 重启 Samba 服务"></a>5. 重启 Samba 服务</h3><pre class=" language-shell"><code class="language-shell">sudo service smbd restart
</code></pre>
<h3 id="6-测试-smb-conf-配置有没有错误"><a href="#6-测试-smb-conf-配置有没有错误" class="headerlink" title="6. 测试 smb.conf 配置有没有错误"></a>6. 测试 smb.conf 配置有没有错误</h3><pre class=" language-shell"><code class="language-shell">testparm
</code></pre>
<h2 id="在-Windows-中访问共享文件夹"><a href="#在-Windows-中访问共享文件夹" class="headerlink" title="在 Windows 中访问共享文件夹"></a>在 Windows 中访问共享文件夹</h2><ol>
<li>打开资源管理器，在地址栏中输入 <code>\\&lt;linux_ip&gt;</code> 回车</li>
<li>输入刚刚配置的用户名和密码</li>
<li>将共享的文件夹收藏到 Quick access，或者添加快捷方式到桌面</li>
</ol>
<blockquote>
<p>Tip: 可以把 ip 配置到 hosts 中，方便访问</p>
</blockquote>
<h2 id="使用体验"><a href="#使用体验" class="headerlink" title="使用体验"></a>使用体验</h2><ul>
<li>解决了 Vitural Box 软链接的问题</li>
<li>某些 IDE 里面（比如 Atom）如果想要删除文件，只能 Move to trash，不能 Delete，这时会删除失败</li>
</ul>
<p>感谢 <a href="https://v2ex.com/member/odirus" target="_blank" rel="external">@odirus</a> <a href="https://v2ex.com/member/egen" target="_blank" rel="external">@egen</a> <a href="https://v2ex.com/member/Kymair" target="_blank" rel="external">@Kymair</a> 提供的建议！</p>
<h2 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h2><ul>
<li><a href="https://help.ubuntu.com/community/How%20to%20Create%20a%20Network%20Share%20Via%20Samba%20Via%20CLI%20(Command-line%20interface/Linux%20Terminal)%20-%20Uncomplicated,%20Simple%20and%20Brief%20Way!" target="_blank" rel="external">Samba Configuration</a></li>
</ul>

  </div>
</article>
<blockquote class="top-gap-big"> <p> 本文遵循 <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" class"text-muted">CC BY-ND-ND 3.0</a> 协议，转载请注明原作者，禁止商用，禁止演绎。 </p> </blockquote>
<div class="top-gap-big text-center text-muted">
  <small>
    <i class="czs-tag-l"></i>
    <a class="text-muted" href="/tags/Windows/">Windows</a> , <a class="text-muted" href="/tags/Hyper-V/">Hyper-V</a> , <a class="text-muted" href="/tags/Samba/">Samba</a>
  </small>
</div>


  <div id="disqus_thread" class="top-gap-big"></div>
  <script>
    var langMap = {
      en: 'en',
      'zh-CN': 'zh'
    };
    var disqus_config = function () {
      this.language = langMap['zh-CN'] || langMap['en'];
      this.page.url = 'http://blog.xcatliu.com/2016/05/20/setup_linux_workspace_in_windows_using_hyper-v/';
      this.page.identifier = '2016/05/20/setup_linux_workspace_in_windows_using_hyper-v/';
      this.page.title = '在 Windows 中配置 Linux 工作环境（使用 Hyper-V）';
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = '//xcatliu.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


        <hr class="top-gap-big"></hr>
<p class="text-center">
  <small class="text-muted">
    &copy;
    
      2012 -
    
    <span itemprop="copyrightYear">2020</span>
    <i class="czs-heart" style="color:red;"></i>
    <span itemprop="copyrightHolder">xcatliu</span>

    <br/>

    由 <a class="text-muted" href="https://hexo.io" title="Hexo">Hexo</a> 强力驱动
    <span class="theme-separator">·</span>
    主题
    <a class="text-muted" href="https://github.com/xcatliu/hexo-theme-milk">Milk</a>
  </small>
</p>

      </div>
      <div class="theme-sidebar-mask theme-hide"></div>
<aside class="theme-sidebar-wrapper">
  <div class="container flex-left units-gap theme-header-container">
    
    <a class="unit-0 theme-icon-link" href="/archives" title="归档">
      <i class="czs-folder-l"></i>
    </a>
  
    <a class="unit-0 theme-icon-link" href="/categories" title="分类">
      <i class="czs-bookmark-l"></i>
    </a>
  
    <a class="unit-0 theme-icon-link" href="/tags" title="标签">
      <i class="czs-tag-l"></i>
    </a>
  
    <div class="unit"></div>
  
    <a class="unit-0 theme-icon-link" href="http://xcatliu.com" title="关于我">
      <i class="czs-user-l"></i>
    </a>
  

  </div>
  <div class="container">
    
          <h2>流浪小猫的博客</h2>
          
          <p class="top-gap-0 text-muted">记录我的成长点滴</p>
          
          <div class="flex-left flex-middle top-gap">
            <img alt="Avatar" height="24" src="/assets/about/xcatliu_512.png"/>
            <span class="theme-sidebar-author">xcatliu</span>
          </div>
          
          <p>欢迎访问流浪小猫的博客，这里搜集了我的技术文章和生活感悟，希望能够与您一起交流，共同成长。</p>
          
          <p class="theme-sidebar-social">
            
    <a class="unit-0 theme-icon-link" href="https://github.com/xcatliu" title="GitHub">
      <i class="czs-github"></i>
    </a>
  
    <a class="unit-0 theme-icon-link" href="https://www.v2ex.com/member/xcatliu" title="V2EX">
      <i class="czs-v2ex"></i>
    </a>
  
    <a class="unit-0 theme-icon-link" href="https://twitter.com/xcatliu" title="Twitter">
      <i class="czs-twitter"></i>
    </a>
  
    <a class="unit-0 theme-icon-link" href="mailto:xcatliu@gmail.com" title="Gmail">
      <i class="czs-message-l"></i>
    </a>
  
    <a class="unit-0 theme-icon-link" href="/atom.xml" title="RSS 订阅">
      <i class="czs-rss"></i>
    </a>
  

          </p>
          
          <h5>友情链接</h5>
          <p class="text-muted">
            <small>
              <ul class="theme-list-style-none">
                <li><a class="text-muted" href="http://chuangzaoshi.com/">创造狮</a></li><li><a class="text-muted" href="https://blog.jamespan.me/">James Pan's Blog</a></li><li><a class="text-muted" href="/links">More</a></li>
              </ul>
            </small>
          </p>
          
  </div>
</aside>

    </div>
    <script src="/js/theme.js"></script>
    
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-45256157-6', 'auto');
    ga('send', 'pageview');
  </script>


    
  <script id="dsq-count-scr" src="//xcatliu.disqus.com/count.js" async></script>

  </body>
</html>
