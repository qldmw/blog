<!doctype html><html class="" data-reactroot=""><head>
<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="description" content="欢迎来到我的博客，这里搜集了我的技术文章和生活感悟，欢迎一起交流成长。"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/>
<title data-react-helmet="true">我花了两个月时间，定制出了心目中「完美」的 ESLint 规则，我用四个空格缩进 · 流浪小猫的博客</title>
<link data-react-helmet="true" rel="stylesheet" href="/assets/index.css"/><link data-react-helmet="true" id="prismTheme" rel="stylesheet" href="/assets/prism.css"/>
<script data-react-helmet="true" >
    const shouldSetIsDark = document.cookie.includes('is_dark=1') ? true : document.cookie.includes('is_dark=0') ? false : window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (shouldSetIsDark) {
      document.documentElement.classList.add('is_dark');
      document.getElementById('prismTheme').href = "/assets/prism_tomorrow.css";
    }
  </script>
</head><body><aside><h1><a href="/">流浪小猫的博客</a></h1><p class="description">欢迎来到我的博客，这里搜集了我的技术文章和生活感悟，欢迎一起交流成长。</p><ul class="social"><li class="flex_center"><a class="czs-github-logo" href="https://github.com/xcatliu" target="_blank" style="background-image:url(&quot;/assets/czs-github-logo.svg&quot;)"></a></li><li class="flex_center"><a class="czs-message-l" href="mailto:xcatliu@gmail.com" target="_blank" style="background-image:url(&quot;/assets/czs-message-l.svg&quot;)"></a></li><li class="flex_center"><a class="czs-twitter" href="https://twitter.com/xcatliu" target="_blank" style="background-image:url(&quot;/assets/czs-twitter.svg&quot;)"></a></li><li style="flex-grow:1"></li><li class="toggle_dark flex_center"><span class="czs-sun" style="background-image:url(&quot;/assets/czs-sun.svg&quot;)"></span><span class="czs-sun-l" style="background-image:url(&quot;/assets/czs-sun-l.svg&quot;)"></span><span class="czs-moon" style="background-image:url(&quot;/assets/czs-moon.svg&quot;)"></span><span class="czs-moon-l" style="background-image:url(&quot;/assets/czs-moon-l.svg&quot;)"></span></li></ul><nav><ul class="menu"><li><a class="flex_center" href="/"><span class="czs-home-l" style="background-image:url(&quot;/assets/czs-home-l.svg&quot;)"></span>首页</a></li><li><a class="flex_center" href="/categories/"><span class="czs-category-l" style="background-image:url(&quot;/assets/czs-category-l.svg&quot;)"></span>分类</a></li><li><a class="flex_center" href="/tags/"><span class="czs-tag-l" style="background-image:url(&quot;/assets/czs-tag-l.svg&quot;)"></span>标签</a></li><li><a class="flex_center" href="/about/"><span class="czs-about-l" style="background-image:url(&quot;/assets/czs-about-l.svg&quot;)"></span>关于</a></li><li><a class="flex_center" href="/archives/"><span class="czs-box-l" style="background-image:url(&quot;/assets/czs-box-l.svg&quot;)"></span>归档</a></li><li><a class="flex_center" href="/links/"><span class="czs-link-l" style="background-image:url(&quot;/assets/czs-link-l.svg&quot;)"></span>友情链接</a></li></ul></nav></aside><section class="main"><h1>我花了两个月时间，定制出了心目中「完美」的 ESLint 规则，我用四个空格缩进</h1><div class="main_post_meta"><time dateTime="Fri Aug 25 2017 00:00:00 GMT+0000 (UTC)">2017-08-26</time> · <!-- -->xcatliu</div><article><ul>
<li><a href="https://github.com/AlloyTeam/eslint-config-alloy">GitHub Repo</a></li>
</ul>
<p>本规则包含以下几种配置项：</p>
<ul>
<li><a href="https://github.com/AlloyTeam/eslint-config-alloy/tree/master/index.js">标准规则</a>：包含<a href="https://eslint.org/docs/rules/">所有 ESLint 规则</a></li>
<li><a href="https://github.com/AlloyTeam/eslint-config-alloy/tree/master/react.js">React 版</a>：在标准规则的基础上，增加了所有 <a href="https://github.com/yannickcr/eslint-plugin-react">eslint-plugin-react</a> 规则</li>
<li><a href="https://github.com/AlloyTeam/eslint-config-alloy/tree/master/vue.js">Vue 版</a>：在标准规则的基础上，增加了所有 <a href="https://github.com/vuejs/eslint-plugin-vue">eslint-plugin-vue</a> 规则</li>
</ul>
<h2 id="%E9%85%8D%E7%BD%AE%E5%8E%9F%E5%88%99">配置原则<a class="anchor" href="#%E9%85%8D%E7%BD%AE%E5%8E%9F%E5%88%99">§</a></h2>
<p>我们依据以下三条原则，研读了 ESLint 所有的配置项，定制出了心目中的「完美」ESLint 配置。</p>
<ol>
<li>能够帮助发现代码错误的规则，全部开启</li>
<li>配置不应该依赖于某个具体项目，而应尽可能的合理</li>
<li>帮助保持团队的代码风格统一，而不是限制开发体验</li>
</ol>
<h2 id="%E9%85%8D%E7%BD%AE%E8%A7%A3%E8%AF%BB">配置解读<a class="anchor" href="#%E9%85%8D%E7%BD%AE%E8%A7%A3%E8%AF%BB">§</a></h2>
<p>我们对每一条配置，都有详尽的注释，这样不仅方便了我们自己查阅某项配置的意义和原因，也使大家更容易配置出自己心目中的规则：</p>
<ul>
<li>每一条配置都有注释说明此配置的用途</li>
<li>对于理解困难的配置，都在注释中有举例</li>
<li>对于有争议的配置，都在注释中说明了为什么要这么配置的原因</li>
<li>对于关闭掉的配置，都在注释中有对应的原因说明，以及 <code>@off</code> 的标识</li>
<li>对于能够 autofix 的配置，都在注释中有标注 <code>@autofix</code></li>
</ul>
<p>详细的配置内容在这里：</p>
<ul>
<li><a href="https://github.com/AlloyTeam/eslint-config-alloy/blob/master/index.js">ESLint 标准规则</a></li>
<li><a href="https://github.com/AlloyTeam/eslint-config-alloy/blob/master/react.js">eslint-plugin-react 规则</a></li>
<li><a href="https://github.com/AlloyTeam/eslint-config-alloy/blob/master/vue.js">eslint-plugin-vue 规则</a></li>
</ul>
<p>下面列出一个代码片段供参考：</p>
<pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token string">'babel-eslint'</span><span class="token punctuation">,</span>
    parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        ecmaVersion<span class="token operator">:</span> <span class="token number">2017</span><span class="token punctuation">,</span>
        sourceType<span class="token operator">:</span> <span class="token string">'module'</span><span class="token punctuation">,</span>
        ecmaFeatures<span class="token operator">:</span> <span class="token punctuation">{</span>
            experimentalObjectRestSpread<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            jsx<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    env<span class="token operator">:</span> <span class="token punctuation">{</span>
        browser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        node<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        commonjs<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        es6<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 以当前目录为根目录，不再向上查找 .eslintrc.js</span>
    root<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    rules<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">//</span>
        <span class="token comment">//</span>
        <span class="token comment">// 可能的错误</span>
        <span class="token comment">// 这些规则与 JavaScript 代码中可能的语法错误或逻辑错误有关</span>
        <span class="token comment">//</span>
        <span class="token comment">// 禁止 for 循环出现方向错误的循环，比如 for (i = 0; i &lt; 10; i--)</span>
        <span class="token string">'for-direction'</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
        <span class="token comment">// getter 必须有返回值，并且禁止返回空，比如 return;</span>
        <span class="token string">'getter-return'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">'error'</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                allowImplicit<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 禁止将 await 写在循环里，因为这样就无法同时发送多个异步请求了</span>
        <span class="token comment">// @off 要求太严格了，有时需要在循环中写 await</span>
        <span class="token string">'no-await-in-loop'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
        <span class="token comment">// 禁止与负零进行比较</span>
        <span class="token string">'no-compare-neg-zero'</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
        <span class="token comment">// 禁止在 if, for, while 里使用赋值语句，除非这个赋值语句被括号包起来了</span>
        <span class="token string">'no-cond-assign'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">'error'</span><span class="token punctuation">,</span>
            <span class="token string">'except-parens'</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 禁止使用 console</span>
        <span class="token comment">// @off console 的使用很常见</span>
        <span class="token string">'no-console'</span><span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
        <span class="token comment">// 禁止将常量作为 if, for, while 里的测试条件，比如 if (true), for (;;)，除非循环内部有 break 语句</span>
        <span class="token string">'no-constant-condition'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">'error'</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                checkLoops<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 禁止在正则表达式中出现 Ctrl 键的 ASCII 表示，即禁止使用 /\x1f/</span>
        <span class="token comment">// 开启此规则，因为字符串中一般不会出现 Ctrl 键，所以一旦出现了，可能是一个代码错误</span>
        <span class="token string">'no-control-regex'</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
        <span class="token comment">// @fixable 禁止使用 debugger</span>
        <span class="token string">'no-debugger'</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
        <span class="token comment">// 禁止在函数参数中出现重复名称的参数</span>
        <span class="token string">'no-dupe-args'</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
        <span class="token comment">// 禁止在对象字面量中出现重复名称的键名</span>
        <span class="token string">'no-dupe-keys'</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">使用方法<a class="anchor" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">§</a></h2>
<h3 id="%E6%A0%87%E5%87%86%E8%A7%84%E5%88%99">标准规则<a class="anchor" href="#%E6%A0%87%E5%87%86%E8%A7%84%E5%88%99">§</a></h3>
<h4 id="%E5%AE%89%E8%A3%85">安装<a class="anchor" href="#%E5%AE%89%E8%A3%85">§</a></h4>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev eslint-config-alloy babel-eslint
</code></pre>
<h4 id="%E9%85%8D%E7%BD%AE-eslintrcjs">配置 .eslintrc.js<a class="anchor" href="#%E9%85%8D%E7%BD%AE-eslintrcjs">§</a></h4>
<p>在你的项目根目录下创建 <code>.eslintrc.js</code>，并将以下内容复制到文件中：</p>
<pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'eslint-config-alloy'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    globals<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里填入你的项目需要的全局变量</span>
        <span class="token comment">// 这里值为 false 表示这个全局变量不允许被重新赋值，比如：</span>
        <span class="token comment">//</span>
        <span class="token comment">// jQuery: false,</span>
        <span class="token comment">// $: false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rules<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里填入你的项目需要的个性化配置，比如：</span>
        <span class="token comment">//</span>
        <span class="token comment">// // @fixable 一个缩进必须用两个空格替代</span>
        <span class="token comment">// 'indent': [</span>
        <span class="token comment">//     'error',</span>
        <span class="token comment">//     2,</span>
        <span class="token comment">//     {</span>
        <span class="token comment">//         SwitchCase: 1,</span>
        <span class="token comment">//         flatTernaryExpressions: true</span>
        <span class="token comment">//     }</span>
        <span class="token comment">// ]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="react-%E7%89%88">React 版<a class="anchor" href="#react-%E7%89%88">§</a></h3>
<h4 id="%E5%AE%89%E8%A3%85-1">安装<a class="anchor" href="#%E5%AE%89%E8%A3%85-1">§</a></h4>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev eslint-config-alloy eslint-plugin-react babel-eslint
</code></pre>
<h4 id="%E9%85%8D%E7%BD%AE-eslintrcjs-1">配置 .eslintrc.js<a class="anchor" href="#%E9%85%8D%E7%BD%AE-eslintrcjs-1">§</a></h4>
<p>在你的项目根目录下创建 <code>.eslintrc.js</code>，并将以下内容复制到文件中：</p>
<pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'eslint-config-alloy/react'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    globals<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里填入你的项目需要的全局变量</span>
        <span class="token comment">// 这里值为 false 表示这个全局变量不允许被重新赋值，比如：</span>
        <span class="token comment">//</span>
        <span class="token comment">// React: false,</span>
        <span class="token comment">// ReactDOM: false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rules<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里填入你的项目需要的个性化配置，比如：</span>
        <span class="token comment">//</span>
        <span class="token comment">// // @fixable 一个缩进必须用两个空格替代</span>
        <span class="token comment">// 'indent': [</span>
        <span class="token comment">//     'error',</span>
        <span class="token comment">//     2,</span>
        <span class="token comment">//     {</span>
        <span class="token comment">//         SwitchCase: 1,</span>
        <span class="token comment">//         flatTernaryExpressions: true</span>
        <span class="token comment">//     }</span>
        <span class="token comment">// ],</span>
        <span class="token comment">// // @fixable jsx 的 children 缩进必须为两个空格</span>
        <span class="token comment">// 'react/jsx-indent': [</span>
        <span class="token comment">//     'error',</span>
        <span class="token comment">//     2</span>
        <span class="token comment">// ],</span>
        <span class="token comment">// // @fixable jsx 的 props 缩进必须为两个空格</span>
        <span class="token comment">// 'react/jsx-indent-props': [</span>
        <span class="token comment">//     'error',</span>
        <span class="token comment">//     2</span>
        <span class="token comment">// ]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="vue-%E7%89%88">Vue 版<a class="anchor" href="#vue-%E7%89%88">§</a></h3>
<h4 id="%E5%AE%89%E8%A3%85-2">安装<a class="anchor" href="#%E5%AE%89%E8%A3%85-2">§</a></h4>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev eslint-config-alloy eslint-plugin-vue babel-eslint
</code></pre>
<h4 id="%E9%85%8D%E7%BD%AE-eslintrcjs-2">配置 .eslintrc.js<a class="anchor" href="#%E9%85%8D%E7%BD%AE-eslintrcjs-2">§</a></h4>
<p>在你的项目根目录下创建 <code>.eslintrc.js</code>，并将以下内容复制到文件中：</p>
<pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'eslint-config-alloy/vue'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    globals<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里填入你的项目需要的全局变量</span>
        <span class="token comment">// 这里值为 false 表示这个全局变量不允许被重新赋值，比如：</span>
        <span class="token comment">//</span>
        <span class="token comment">// Vue: false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rules<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里填入你的项目需要的个性化配置，比如：</span>
        <span class="token comment">//</span>
        <span class="token comment">// // @fixable 一个缩进必须用两个空格替代</span>
        <span class="token comment">// 'indent': [</span>
        <span class="token comment">//     'error',</span>
        <span class="token comment">//     2,</span>
        <span class="token comment">//     {</span>
        <span class="token comment">//         SwitchCase: 1,</span>
        <span class="token comment">//         flatTernaryExpressions: true</span>
        <span class="token comment">//     }</span>
        <span class="token comment">// ]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="%E5%9C%A8vscode%E4%B8%AD%E4%BD%BF%E7%94%A8">在VSCode中使用<a class="anchor" href="#%E5%9C%A8vscode%E4%B8%AD%E4%BD%BF%E7%94%A8">§</a></h4>
<p>在VSCode中，默认有可能并不识别 <code>.vue</code> 文件，你需要做如下配置。</p>
<pre class="language-autoit"><code class="language-autoit">文件 <span class="token operator">=</span><span class="token operator">></span> 首选项 <span class="token operator">=</span><span class="token operator">></span> 设置 

做如下配置，便可支持ESLint检测 <span class="token punctuation">.</span>vue 文件
{
    <span class="token string">"eslint.validate"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">"javascript"</span><span class="token punctuation">,</span>
        <span class="token string">"javascriptreact"</span><span class="token punctuation">,</span>
        <span class="token string">"html"</span><span class="token punctuation">,</span>
        <span class="token string">"vue"</span>
    <span class="token punctuation">]</span>
}
</code></pre>
<h2 id="testing">Testing<a class="anchor" href="#testing">§</a></h2>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token builtin class-name">test</span>
</code></pre>
<h2 id="links">Links<a class="anchor" href="#links">§</a></h2>
<ul>
<li><a href="http://alloyteam.github.io/CodeGuide">Alloyteam Code Guide</a></li>
<li><a href="http://eslint.org/docs/user-guide/configuring">ESlint Code Guide</a></li>
<li><a href="http://eslint.org/docs/developer-guide/shareable-configs">ESlint Shareable Config</a></li>
</ul></article></section><footer>Powered by <a href="https://github.com/xcatliu/pagic" target="_blank">Pagic</a></footer><script src="https://cdn.pagic.org/react@16.13.1/umd/react.production.min.js"></script><script src="https://cdn.pagic.org/react-dom@16.13.1/umd/react-dom.production.min.js"></script><script type="module" src="/index.js"></script></body></html>